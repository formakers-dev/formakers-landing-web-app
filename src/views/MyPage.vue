<template>
  <div>
    <div class="columns">
      <div class="column is-narrow">
        <b-menu class="menu">
          <b-menu-list>
            <b-menu-item
              label="ë‚´ ì˜ë¢° ëª©ë¡"
              tag="router-link"
              to="/my-page/request-list"
            />
            <b-menu-item label="ë¡œê·¸ì•„ì›ƒ" @click="onClickLogout" />
          </b-menu-list>
        </b-menu>
      </div>

      <div class="column">
        <router-view />
      </div>
    </div>
  </div>
</template>

<script>
import request from "@/common/utils/http";

export default {
  name: "MyPage",
  methods: {
    onClickLogout() {
      request
        .post("/auth/logout")
        .then(() => {
          this.$buefy.toast.open({
            type: "is-success",
            message: "ì„±ê³µì ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ‘‹"
          });
          this.$router.push("/");
        })
        .catch(err => {
          console.error(err);
          this.$buefy.toast.open({
            type: "is-danger",
            message: "ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ í•œ ë²ˆ ì‹œë„í•´ì£¼ì„¸ìš”. ğŸ™"
          });
        });
    }
  }
};
</script>

<style scoped>
.menu {
  padding: 4rem 3rem 2rem 4rem;
}
</style>
